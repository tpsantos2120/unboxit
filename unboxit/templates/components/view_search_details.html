{% block content %} {% if result %}
<div id="view-details-modal" class="uk-modal-full" uk-modal>
  <div class="uk-modal-dialog">
    <button
      class="uk-modal-close-full uk-close-large close-details-modal"
      type="button"
      uk-close
    ></button>
    <div class="uk-grid-collapse uk-child-width-1-2@s uk-flex-middle" uk-grid>
      <div class="uk-background-cover" uk-height-viewport></div>
      <div class="uk-padding-large">
        <h2 class="uk-modal-title">{{result.title}}</h2>
        <h6>Description</h6>
        <p>{{result.description}}</p>
        <div class="uk-child-width-expand@s uk-text-center" uk-grid>
          <div>
            <div class="uk-inline">
              <button class="uk-button uk-button-default" type="button">
                Year: {{result.year}}
              </button>
            </div>
          </div>
          <div>
            <div class="uk-inline">
              <button class="uk-button uk-button-default" type="button">
                IMDB Rating: {{result.imdb_rating}}
              </button>
            </div>
          </div>
        </div>

        <div class="uk-child-width-expand@s uk-text-center" uk-grid>
          <div>
            <div class="uk-inline">
              <button class="uk-button uk-button-default" type="button">
                Vote Count: {{result.vote_count}}
              </button>
            </div>
          </div>
          <div>
            <div class="uk-inline">
              <button class="uk-button uk-button-default" type="button">
                Release Date: {{result.release_date}}
              </button>
            </div>
          </div>
        </div>

        <div class="uk-child-width-expand@s uk-text-center" uk-grid>
          <div>
            <div class="uk-inline">
              <button class="uk-button uk-button-default" type="button">
                Popularity: {{result.popularity}}
              </button>
            </div>
          </div>
          <div>
            <div class="uk-inline">
              <button class="uk-button uk-button-default" type="button">
                Runtime: {{result.runtime}}mins
              </button>
            </div>
          </div>
        </div>

        <div class="uk-child-width-expand@s uk-text-center" uk-grid>
          <div>
            <div class="uk-inline">
              <button class="uk-button uk-button-default" type="button">
                Stars
              </button>
              <div uk-dropdown>
                {% for star in result.stars[0:5] %}
                <li>{{star}}</li>
                {% endfor %}
              </div>
            </div>
          </div>
          <div>
            <div class="uk-inline">
              <button class="uk-button uk-button-default" type="button">
                Genres
              </button>
              <div uk-dropdown>
                {% for genre in result.genres[0:5] %}
                <li>{{genre}}</li>
                {% endfor %}
              </div>
            </div>
          </div>
          <div>
            <div class="uk-inline">
              <button class="uk-button uk-button-default" type="button">
                Directors
              </button>
              <div uk-dropdown>
                {% if result.directors%} {% for director in
                result.directors[0:5] %}
                <li>{{director}}</li>
                {% endfor %} {% endif %} {% if result.creators%} {% for director
                in result.creators[0:5] %}
                <li>{{director}}</li>
                {% endfor %} {% endif %}
              </div>
            </div>
          </div>
        </div>
        <hr class="uk-divider-icon" />
        <div class="uk-child-width-expand@s uk-text-center" uk-grid>
          <div>
            {% if not result.youtube_trailer_key == "" %}
            <a
              class="uk-button uk-button-default open-video uk-margin-small-bottom"
              href="#modal-media-youtube"
              uk-toggle
              >Trailer</a
            >
            {% endif %}
          </div>
          {% if logged_in == True %}
          <div>
            <a
              class="uk-button uk-button-default uk-margin-small-bottom"
              id="watchlist-button"
              href="#"
              >Add</a
            >
          </div>

          {% endif %}
        </div>
        <div id="modal-media-youtube" class="uk-flex-top" uk-modal>
          <div class="uk-modal-dialog uk-width-auto uk-margin-auto-vertical">
            <button
              class="uk-modal-close-outside close-video-modal"
              type="button"
              uk-close
            ></button>
            <iframe
              src="https://www.youtube-nocookie.com/embed/{{result.youtube_trailer_key}}"
              width="1920"
              height="1080"
              frameborder="0"
              uk-video
              uk-responsive
            ></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %} {% endblock %} {% block script %}
<script>
  $(function () {
    $('a#watchlist-button').bind('click', function() {
      var url = "{{url_for('moviesapi')}}";
      var data ='{{ result|tojson }}'; 
      $.ajax({
        url: url,
        type: "post",
        data: {data:data},
        success: function (response) {
          userFeedback(response);
        },
        error: function (error) {
          userFeedback(error);
        },
      });
    });
    function userFeedback(userFeedback){
      UIkit.notification({
            message: userFeedback.message || userFeedback.responseJSON.message,
            status: userFeedback.message ? "success" : "warning",
            pos: "top-center",
            timeout: 5000,
          });
          $('a#watchlist-button').attr('disabled', " ");
    }
  });
</script>
{% endblock %}
